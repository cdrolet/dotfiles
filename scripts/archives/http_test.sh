#!/bin/bash

# Define the URL and the query

URL="http://localhost:8080/playground"
RequestBody='{"query": "query selection ($targetId: [String], $locale: Locale) { selection(locale: $locale) { property (id: {values: $targetId}) { id name localized_name structure_type attribute { id value } nearby_selection( must: { distance: { direct_km: { to: 10 } } } ) { topfamilypoi: poi( limit: 3 must: { poi: { popularity: { from: 0.50 } type: { values: [ \"amusementPark\" \"aquaticCentre\" \"aquarium\" \"arcadeAdventureZone\" \"botanicalGarden\" \"childrensMuseum\" \"dolphinarium\" \"iceSkating\" \"karting\" \"marinePark\" \"maritimeMuseum\" \"maze\" \"miniGolf\" \"musicMuseum\" \"nationalPark\" \"nationalStatePark\" \"naturalHistoryMuseum\" \"park\" \"pettingZoo\" \"planetariumObservatory\" \"playground\" \"railwayMuseum\" \"scienceMuseum\" \"ski\" \"spacePark\" \"sportsMuseum\" \"themePark\" \"urbanPark\" \"waterFeature\" \"waterPark\" \"waxMuseum\" \"zoo\" ] } } } must_not: { concept: { name: { values: [ AnimalWelfarePolicyViolation PrivatePropertyNotOpenToThePublic AdultsOnly ] } } } ) { id name localized_name popularity type distance_metric { direct_km walking_minutes walking_km driving_km driving_minutes } } familypoi: poi( limit: 3 must: { poi: { popularity: { from: 0.05 } type: { values: [ \"amusementPark\" \"aquaticCentre\" \"aquarium\" \"arcadeAdventureZone\" \"botanicalGarden\" \"childrensMuseum\" \"dolphinarium\" \"iceSkating\" \"karting\" \"marinePark\" \"maritimeMuseum\" \"maze\" \"miniGolf\" \"musicMuseum\" \"nationalPark\" \"nationalStatePark\" \"naturalHistoryMuseum\" \"park\" \"pettingZoo\" \"planetariumObservatory\" \"playground\" \"railwayMuseum\" \"scienceMuseum\" \"ski\" \"spacePark\" \"sportsMuseum\" \"themePark\" \"urbanPark\" \"waterFeature\" \"waterPark\" \"waxMuseum\" \"zoo\" ] } } } must_not: { concept: { name: { values: [ AnimalWelfarePolicyViolation PrivatePropertyNotOpenToThePublic AdultsOnly ] } } } ) { id name localized_name popularity type distance_metric { direct_km walking_minutes walking_km driving_km driving_minutes } } toppoi: poi( limit: 3 must: { poi: { popularity: { from: 0.50 } } } must_not: { concept: { name: { values: [ AnimalWelfarePolicyViolation PrivatePropertyNotOpenToThePublic AdultsOnly ] } } poi: {type: { values: [\"academy\" \"alcoholBrewery\" \"alcoholDistillery\" \"alcoholWinery\" \"bodyTreatment\" \"building\" \"businessArea\" \"businessBuilding\" \"businessHeadquartersCenter\" \"busTrainTerminal\" \"casino\" \"cemetery\" \"civic\" \"conventionCentre\" \"countryPrivateClub\" \"cruiseTerminal\" \"dance\" \"dockPort\" \"drinkingPub\" \"embassy\" \"embassyConsulate\" \"erotic\" \"eventConferenceVenue\" \"exhibitOther\" \"ferryTerminal\" \"hospital\" \"hotel\" \"mausoleum\" \"medicalCentre\" \"memorial\" \"military\" \"militaryInstallation\" \"modernCivicGovernmentBuilding\" \"modernCollegeUniversity\" \"nightclub\" \"shrine\" \"street\" \"townHall\" \"visitorCenter\" \"visitorCentre\" ] } } } ) { id name localized_name popularity type distance_metric { direct_km walking_minutes walking_km driving_km driving_minutes } } poi: poi( limit: 3 must: { poi: { popularity: { from: 0.25 } } } must_not: { concept: { name: { values: [ AnimalWelfarePolicyViolation PrivatePropertyNotOpenToThePublic AdultsOnly ] } } poi: {type: { values: [\"academy\" \"alcoholBrewery\" \"alcoholDistillery\" \"alcoholWinery\" \"bodyTreatment\" \"building\" \"businessArea\" \"businessBuilding\" \"businessHeadquartersCenter\" \"busTrainTerminal\" \"casino\" \"cemetery\" \"civic\" \"conventionCentre\" \"countryPrivateClub\" \"cruiseTerminal\" \"dance\" \"dockPort\" \"drinkingPub\" \"embassy\" \"embassyConsulate\" \"erotic\" \"eventConferenceVenue\" \"exhibitOther\" \"ferryTerminal\" \"hospital\" \"hotel\" \"mausoleum\" \"medicalCentre\" \"memorial\" \"military\" \"militaryInstallation\" \"modernCivicGovernmentBuilding\" \"modernCollegeUniversity\" \"nightclub\" \"shrine\" \"street\" \"townHall\" \"visitorCenter\" \"visitorCentre\" ] } } } ) { id name localized_name popularity type distance_metric { direct_km walking_minutes walking_km driving_km driving_minutes } } beachpoi: poi( limit: 3 must: { poi: { popularity: { from: 0.4 } type: { values: [ \"beach\" ] } } } must_not: { concept: { name: { values: [ AnimalWelfarePolicyViolation PrivatePropertyNotOpenToThePublic AdultsOnly ] } } } ) { id name localized_name popularity type distance_metric { direct_km walking_minutes walking_km driving_km driving_minutes } } } airport: nearby_selection (must: {airport: {bookable: true, major: true}, distance: {direct_km: {to: 50}}}) { airport { id friendly_name name localized_name popularity primary bookable major distance_metric { direct_km walking_minutes walking_km driving_km driving_minutes } } } } }}", "variables": {"variables": { "targetId" : 22246640, "locale" : "DE_CH", "localeString" : "DE_CH" } } }'

# Number of requests to send
REQUESTS=20

# Loop to send the requests in parallel
for ((i = 0; i < REQUESTS; i++)); do
  # Send each request in the background without waiting for the response
  curl -X POST -H "Content-Type: application/json" -d "$RequestBody" "$URL" >/dev/null 2>&1 &
done

# Wait for all requests to be launched
wait

echo "All requests sent"